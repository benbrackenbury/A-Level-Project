{"ast":null,"code":"var Promise = require('promise');\n\nvar post = require('./lib/post'); // Get your own key: http://api.imgur.com/\n//ClientID = 39cf80837546f04\n//ClientSecret = 73087fb94d1c7a2ae3141c86e1da5c1c8ead63f5\n\n\nmodule.exports = imgur;\n\nfunction imgur(clientID, file, callback) {\n  if (arguments.length === 1) {\n    return function (file, callback) {\n      return imgur(clientID, file, callback);\n    };\n  }\n\n  return new Promise(function (resolve, reject) {\n    if (!file) {\n      var err = new Error('You must supply an image to upload.');\n      err.code = 'MissingFile';\n      throw err;\n    }\n\n    if (typeof FormData !== 'undefined' && !file.type.match(/image.*/)) {\n      var err = new Error('Invalid file type, imgur only accepts images.');\n      err.code = 'InvalidFileType';\n      throw err;\n    }\n\n    post(file, clientID, function (err, res) {\n      if (err) return reject(err);else return resolve(res);\n    });\n  }).then(JSON.parse).then(function (res) {\n    if (res.success) {\n      return res.data.link;\n    } else {\n      var err = new Error(res.data && res.data.error || JSON.stringify(res));\n\n      for (var key in res) {\n        if (key !== 'success') err[key] = res[key];\n      }\n\n      throw err;\n    }\n  }).nodeify(callback);\n}","map":null,"metadata":{},"sourceType":"script"}