{"ast":null,"code":"import _classCallCheck from \"/mnt/c/Users/Ben Brackenbury/CS Project/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Ben Brackenbury/CS Project/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/Ben Brackenbury/CS Project/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/Ben Brackenbury/CS Project/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/Ben Brackenbury/CS Project/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/mnt/c/Users/Ben Brackenbury/CS Project/client/src/Pages/User/User.js\";\nimport React, { Component } from 'react';\nimport Cookies from 'universal-cookie';\nimport axios from 'axios';\nimport './User.css';\nimport Post from '../../Components/Post/Post';\nvar cookies = new Cookies();\n\nvar getUrlParameter = function getUrlParameter(name) {\n  name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  var regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n  var results = regex.exec(window.location.search);\n  return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n};\n\nvar User =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(User, _Component);\n\n  function User() {\n    var _this;\n\n    _classCallCheck(this, User);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(User).call(this));\n    _this.state = {\n      user: {},\n      posts: []\n    };\n    return _this;\n  }\n\n  _createClass(User, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      if (!cookies.get('user')) window.location = '/login';\n      var error = getUrlParameter('error');\n      if (error == 'does_not_exist') alert('The user you were looking for does not exist');\n      var token = cookies.get('token');\n      var myUsername = cookies.get('user').username;\n      var path = this.props.location.pathname;\n      var user = path.split('/user/')[1];\n      if (path == '/user' || path == '/user/') window.location = \"/user/\".concat(myUsername);\n      axios.get(\"/api/user/username/\".concat(user, \"?token=\").concat(token)).catch(function (err) {\n        return console.error(err);\n      }).then(function (response) {\n        var userData = response.data.result[0];\n        if (!userData) window.location = \"/user/\".concat(myUsername, \"?error=does_not_exist\");\n\n        _this2.setState({\n          user: userData\n        });\n\n        var avatarWrapper = document.getElementById('avatar-wrapper');\n\n        if (_this2.state.user.avatar !== '') {\n          console.log('avatar', _this2.state.user.avatar);\n          avatarWrapper.style.backgroundImage = \"url('\".concat(_this2.state.user.avatar, \"')\");\n          avatarWrapper.style.backgroundSize = 'cover';\n        } //get posts by user\n\n\n        axios.get(\"/api/post/user/\".concat(_this2.state.user.username, \"?token=\").concat(token)).catch(function (err) {\n          return console.error(err);\n        }).then(function (response) {\n          _this2.setState({\n            posts: response.data.result\n          });\n        });\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var gradients = ['linear-gradient(to top, #cfd9df 0%, #e2ebf0 100%)', 'linear-gradient(to top, #fad0c4 0%, #ffd1ff 100%)', 'linear-gradient(to right, #ffecd2 0%, #fcb69f 100%)', 'linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%)', 'linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%)', 'linear-gradient(to top, #a8edea 0%, #fed6e3 100%)', 'linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)'];\n      var index = Math.floor(Math.random() * gradients.length - 1 + 0);\n      var header = document.querySelector('.header');\n      header.style.backgroundImage = gradients[index];\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"User\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"header-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"avatar-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"header-textblock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        id: \"fullname\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, this.state.user.name), React.createElement(\"h2\", {\n        id: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, this.state.user.username)))), React.createElement(\"div\", {\n        class: \"PostsView\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, this.state.posts.map(function (post) {\n        return React.createElement(Post, {\n          key: post.id,\n          postID: \"post_\".concat(post.id),\n          user: post.user,\n          body: post.description,\n          imgurLink: post.imgur_link,\n          category: post.category,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        });\n      })));\n    }\n  }]);\n\n  return User;\n}(Component);\n\nexport default User;","map":{"version":3,"sources":["/mnt/c/Users/Ben Brackenbury/CS Project/client/src/Pages/User/User.js"],"names":["React","Component","Cookies","axios","Post","cookies","getUrlParameter","name","replace","regex","RegExp","results","exec","window","location","search","decodeURIComponent","User","state","user","posts","get","error","alert","token","myUsername","username","path","props","pathname","split","catch","err","console","then","response","userData","data","result","setState","avatarWrapper","document","getElementById","avatar","log","style","backgroundImage","backgroundSize","gradients","index","Math","floor","random","length","header","querySelector","map","post","id","description","imgur_link","category"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Cookies from 'universal-cookie'\r\nimport axios from 'axios'\r\nimport './User.css'\r\nimport Post from '../../Components/Post/Post'\r\n\r\nconst cookies = new Cookies()\r\n\r\nconst getUrlParameter = name => {\r\n    name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\r\n    let regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\r\n    let results = regex.exec(window.location.search);\r\n    return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\r\n}\r\n\r\nclass User extends Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            user: {},\r\n            posts: []\r\n        }\r\n    }\r\n    componentWillMount() {\r\n        if (!cookies.get('user')) window.location = '/login'\r\n        let error = getUrlParameter('error')\r\n        if (error == 'does_not_exist') alert('The user you were looking for does not exist')\r\n        let token = cookies.get('token')\r\n        let myUsername = cookies.get('user').username\r\n        let path = this.props.location.pathname\r\n        let user = path.split('/user/')[1]\r\n        if (path == '/user' || path == '/user/') window.location = `/user/${myUsername}`\r\n        axios.get(`/api/user/username/${user}?token=${token}`)\r\n            .catch(err => console.error(err))\r\n            .then(response => {\r\n                let userData = response.data.result[0]\r\n                if (!userData) window.location = `/user/${myUsername}?error=does_not_exist`\r\n                this.setState({ user: userData })\r\n                let avatarWrapper = document.getElementById('avatar-wrapper')\r\n                if (this.state.user.avatar !== '') {\r\n                    console.log('avatar', this.state.user.avatar)\r\n                    avatarWrapper.style.backgroundImage = `url('${this.state.user.avatar}')`\r\n                    avatarWrapper.style.backgroundSize = 'cover'\r\n                }\r\n                //get posts by user\r\n                axios.get(`/api/post/user/${this.state.user.username}?token=${token}`)\r\n                    .catch(err => console.error(err))\r\n                    .then(response => {\r\n                        this.setState({ posts: response.data.result })\r\n                    })\r\n            })\r\n    }\r\n\r\n    componentDidMount() {\r\n        let gradients = [\r\n            'linear-gradient(to top, #cfd9df 0%, #e2ebf0 100%)',\r\n            'linear-gradient(to top, #fad0c4 0%, #ffd1ff 100%)',\r\n            'linear-gradient(to right, #ffecd2 0%, #fcb69f 100%)',\r\n            'linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%)',\r\n            'linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%)',\r\n            'linear-gradient(to top, #a8edea 0%, #fed6e3 100%)',\r\n            'linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)'\r\n        ]\r\n        let index = Math.floor((Math.random() * gradients.length - 1) + 0)\r\n        let header = document.querySelector('.header')\r\n        header.style.backgroundImage = gradients[index]\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"User\">\r\n\r\n                <div className=\"header\">\r\n                    <div id=\"header-wrapper\">\r\n                        <div id=\"avatar-wrapper\"></div>\r\n                        <div id=\"header-textblock\">\r\n                            <h1 id=\"fullname\">{this.state.user.name}</h1>\r\n                            <h2 id=\"username\">{this.state.user.username}</h2>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"PostsView\">\r\n                    {this.state.posts.map(post => (\r\n                        <Post key={post.id} postID={`post_${post.id}`} user={post.user} body={post.description} imgurLink={post.imgur_link} category={post.category} />\r\n                    ))}\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default User"]},"metadata":{},"sourceType":"module"}