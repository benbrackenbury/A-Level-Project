{"ast":null,"code":"import _classCallCheck from \"/mnt/c/Users/Ben Brackenbury/CS Project/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Ben Brackenbury/CS Project/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/Ben Brackenbury/CS Project/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/Ben Brackenbury/CS Project/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/Ben Brackenbury/CS Project/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/mnt/c/Users/Ben Brackenbury/CS Project/client/src/Pages/User/User.js\";\nimport React, { Component } from 'react';\nimport Cookies from 'universal-cookie';\nimport axios from 'axios';\nimport './User.css';\nimport Post from '../../Components/Post/Post';\nimport FollowBtn from './FollowBtn/FollowBtn';\nvar cookies = new Cookies();\n\nvar getUrlParameter = function getUrlParameter(name) {\n  name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  var regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n  var results = regex.exec(window.location.search);\n  return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n};\n\nvar User =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(User, _Component);\n\n  function User() {\n    var _this;\n\n    _classCallCheck(this, User);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(User).call(this));\n    _this.state = {\n      user: {},\n      posts: [],\n      isMe: true\n    };\n    return _this;\n  }\n\n  _createClass(User, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      if (!cookies.get('user')) window.location = '/login';\n      var token = cookies.get('token');\n      var myUsername = cookies.get('user').username;\n      var path = this.props.location.pathname;\n      var user = path.split('/user/')[1];\n      var isMe = user == myUsername;\n      this.setState({\n        isMe: isMe\n      });\n      if (path == '/user' || path == '/user/') window.location = \"/user/\".concat(myUsername);\n      axios.get(\"/api/user/username/\".concat(user, \"?token=\").concat(token)).catch(function (err) {\n        return console.error(err);\n      }).then(function (response) {\n        var userData = response.data.result[0];\n        if (!userData) window.location = \"/user/\".concat(myUsername);\n\n        _this2.setState({\n          user: userData\n        });\n\n        var avatarWrapper = document.getElementById('avatar-wrapper');\n\n        if (_this2.state.user.avatar !== '') {\n          avatarWrapper.style.backgroundImage = \"url('\".concat(_this2.state.user.avatar, \"')\");\n          avatarWrapper.style.backgroundSize = 'cover';\n        } //get posts by user\n\n\n        axios.get(\"/api/post/user/\".concat(_this2.state.user.username, \"?token=\").concat(token)).catch(function (err) {\n          return console.error(err);\n        }).then(function (response) {\n          _this2.setState({\n            posts: response.data.result\n          });\n        });\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var gradients = ['linear-gradient(to top, #cfd9df 0%, #e2ebf0 100%)', 'linear-gradient(to top, #fad0c4 0%, #ffd1ff 100%)', 'linear-gradient(to right, #ffecd2 0%, #fcb69f 100%)', 'linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%)', 'linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%)', 'linear-gradient(to top, #a8edea 0%, #fed6e3 100%)', 'linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)'];\n      var index = Math.floor(Math.random() * gradients.length - 1 + 0);\n      var header = document.querySelector('.header');\n      header.style.backgroundImage = gradients[index];\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var renderFollowBtn = function renderFollowBtn() {\n        if (!_this3.state.isMe) return React.createElement(FollowBtn, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        });\n      };\n\n      return React.createElement(\"div\", {\n        className: \"User\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"header-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"avatar-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"header-textblock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        id: \"fullname\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, this.state.user.name), React.createElement(\"h2\", {\n        id: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, this.state.user.username)), renderFollowBtn())), React.createElement(\"div\", {\n        className: \"PostsView\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, this.state.posts.map(function (post) {\n        return React.createElement(Post, {\n          key: post.id,\n          postID: \"post_\".concat(post.id),\n          user: post.user,\n          body: post.description,\n          imgurLink: post.imgur_link,\n          category: post.category,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        });\n      })));\n    }\n  }]);\n\n  return User;\n}(Component);\n\nexport default User;","map":{"version":3,"sources":["/mnt/c/Users/Ben Brackenbury/CS Project/client/src/Pages/User/User.js"],"names":["React","Component","Cookies","axios","Post","FollowBtn","cookies","getUrlParameter","name","replace","regex","RegExp","results","exec","window","location","search","decodeURIComponent","User","state","user","posts","isMe","get","token","myUsername","username","path","props","pathname","split","setState","catch","err","console","error","then","response","userData","data","result","avatarWrapper","document","getElementById","avatar","style","backgroundImage","backgroundSize","gradients","index","Math","floor","random","length","header","querySelector","renderFollowBtn","map","post","id","description","imgur_link","category"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,YAAP;AACA,OAAOC,IAAP,MAAiB,4BAAjB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AAEA,IAAMC,OAAO,GAAG,IAAIJ,OAAJ,EAAhB;;AAEA,IAAMK,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,IAAI,EAAI;AAC5BA,EAAAA,IAAI,GAAGA,IAAI,CAACC,OAAL,CAAa,MAAb,EAAqB,KAArB,EAA4BA,OAA5B,CAAoC,MAApC,EAA4C,KAA5C,CAAP;AACA,MAAIC,KAAK,GAAG,IAAIC,MAAJ,CAAW,WAAWH,IAAX,GAAkB,WAA7B,CAAZ;AACA,MAAII,OAAO,GAAGF,KAAK,CAACG,IAAN,CAAWC,MAAM,CAACC,QAAP,CAAgBC,MAA3B,CAAd;AACA,SAAOJ,OAAO,KAAK,IAAZ,GAAmB,EAAnB,GAAwBK,kBAAkB,CAACL,OAAO,CAAC,CAAD,CAAP,CAAWH,OAAX,CAAmB,KAAnB,EAA0B,GAA1B,CAAD,CAAjD;AACH,CALD;;IAOMS,I;;;;;AACF,kBAAc;AAAA;;AAAA;;AACV;AACA,UAAKC,KAAL,GAAa;AACTC,MAAAA,IAAI,EAAE,EADG;AAETC,MAAAA,KAAK,EAAE,EAFE;AAGTC,MAAAA,IAAI,EAAE;AAHG,KAAb;AAFU;AAOb;;;;yCACoB;AAAA;;AACjB,UAAI,CAAChB,OAAO,CAACiB,GAAR,CAAY,MAAZ,CAAL,EAA0BT,MAAM,CAACC,QAAP,GAAkB,QAAlB;AAC1B,UAAIS,KAAK,GAAGlB,OAAO,CAACiB,GAAR,CAAY,OAAZ,CAAZ;AACA,UAAIE,UAAU,GAAGnB,OAAO,CAACiB,GAAR,CAAY,MAAZ,EAAoBG,QAArC;AACA,UAAIC,IAAI,GAAG,KAAKC,KAAL,CAAWb,QAAX,CAAoBc,QAA/B;AACA,UAAIT,IAAI,GAAGO,IAAI,CAACG,KAAL,CAAW,QAAX,EAAqB,CAArB,CAAX;AACA,UAAIR,IAAI,GAAGF,IAAI,IAAIK,UAAnB;AACA,WAAKM,QAAL,CAAc;AAAET,QAAAA,IAAI,EAAJA;AAAF,OAAd;AACA,UAAIK,IAAI,IAAI,OAAR,IAAmBA,IAAI,IAAI,QAA/B,EAAyCb,MAAM,CAACC,QAAP,mBAA2BU,UAA3B;AACzCtB,MAAAA,KAAK,CAACoB,GAAN,8BAAgCH,IAAhC,oBAA8CI,KAA9C,GACKQ,KADL,CACW,UAAAC,GAAG;AAAA,eAAIC,OAAO,CAACC,KAAR,CAAcF,GAAd,CAAJ;AAAA,OADd,EAEKG,IAFL,CAEU,UAAAC,QAAQ,EAAI;AACd,YAAIC,QAAQ,GAAGD,QAAQ,CAACE,IAAT,CAAcC,MAAd,CAAqB,CAArB,CAAf;AACA,YAAI,CAACF,QAAL,EAAexB,MAAM,CAACC,QAAP,mBAA2BU,UAA3B;;AACf,QAAA,MAAI,CAACM,QAAL,CAAc;AAAEX,UAAAA,IAAI,EAAEkB;AAAR,SAAd;;AACA,YAAIG,aAAa,GAAGC,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,CAApB;;AACA,YAAI,MAAI,CAACxB,KAAL,CAAWC,IAAX,CAAgBwB,MAAhB,KAA2B,EAA/B,EAAmC;AAC/BH,UAAAA,aAAa,CAACI,KAAd,CAAoBC,eAApB,kBAA8C,MAAI,CAAC3B,KAAL,CAAWC,IAAX,CAAgBwB,MAA9D;AACAH,UAAAA,aAAa,CAACI,KAAd,CAAoBE,cAApB,GAAqC,OAArC;AACH,SARa,CASd;;;AACA5C,QAAAA,KAAK,CAACoB,GAAN,0BAA4B,MAAI,CAACJ,KAAL,CAAWC,IAAX,CAAgBM,QAA5C,oBAA8DF,KAA9D,GACKQ,KADL,CACW,UAAAC,GAAG;AAAA,iBAAIC,OAAO,CAACC,KAAR,CAAcF,GAAd,CAAJ;AAAA,SADd,EAEKG,IAFL,CAEU,UAAAC,QAAQ,EAAI;AACd,UAAA,MAAI,CAACN,QAAL,CAAc;AAAEV,YAAAA,KAAK,EAAEgB,QAAQ,CAACE,IAAT,CAAcC;AAAvB,WAAd;AACH,SAJL;AAKH,OAjBL;AAkBH;;;wCAEmB;AAChB,UAAIQ,SAAS,GAAG,CACZ,mDADY,EAEZ,mDAFY,EAGZ,qDAHY,EAIZ,mDAJY,EAKZ,mDALY,EAMZ,mDANY,EAOZ,mDAPY,CAAhB;AASA,UAAIC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACE,MAAL,KAAgBJ,SAAS,CAACK,MAA1B,GAAmC,CAApC,GAAyC,CAApD,CAAZ;AACA,UAAIC,MAAM,GAAGZ,QAAQ,CAACa,aAAT,CAAuB,SAAvB,CAAb;AACAD,MAAAA,MAAM,CAACT,KAAP,CAAaC,eAAb,GAA+BE,SAAS,CAACC,KAAD,CAAxC;AACH;;;6BAEQ;AAAA;;AAEL,UAAMO,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC1B,YAAI,CAAC,MAAI,CAACrC,KAAL,CAAWG,IAAhB,EAAsB,OAClB,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADkB;AAGzB,OAJD;;AAMA,aACI;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,EAAE,EAAC,gBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,EAAE,EAAC,gBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI;AAAK,QAAA,EAAE,EAAC,kBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,EAAE,EAAC,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAmB,KAAKH,KAAL,CAAWC,IAAX,CAAgBZ,IAAnC,CADJ,EAEI;AAAI,QAAA,EAAE,EAAC,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAmB,KAAKW,KAAL,CAAWC,IAAX,CAAgBM,QAAnC,CAFJ,CAFJ,EAMK8B,eAAe,EANpB,CADJ,CAFJ,EAaI;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAKrC,KAAL,CAAWE,KAAX,CAAiBoC,GAAjB,CAAqB,UAAAC,IAAI;AAAA,eACtB,oBAAC,IAAD;AAAM,UAAA,GAAG,EAAEA,IAAI,CAACC,EAAhB;AAAoB,UAAA,MAAM,iBAAUD,IAAI,CAACC,EAAf,CAA1B;AAA+C,UAAA,IAAI,EAAED,IAAI,CAACtC,IAA1D;AAAgE,UAAA,IAAI,EAAEsC,IAAI,CAACE,WAA3E;AAAwF,UAAA,SAAS,EAAEF,IAAI,CAACG,UAAxG;AAAoH,UAAA,QAAQ,EAAEH,IAAI,CAACI,QAAnI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADsB;AAAA,OAAzB,CADL,CAbJ,CADJ;AAsBH;;;;EAnFc7D,S;;AAuFnB,eAAeiB,IAAf","sourcesContent":["import React, { Component } from 'react'\r\nimport Cookies from 'universal-cookie'\r\nimport axios from 'axios'\r\nimport './User.css'\r\nimport Post from '../../Components/Post/Post'\r\nimport FollowBtn from './FollowBtn/FollowBtn'\r\n\r\nconst cookies = new Cookies()\r\n\r\nconst getUrlParameter = name => {\r\n    name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\r\n    let regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\r\n    let results = regex.exec(window.location.search);\r\n    return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\r\n}\r\n\r\nclass User extends Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            user: {},\r\n            posts: [],\r\n            isMe: true\r\n        }\r\n    }\r\n    componentWillMount() {\r\n        if (!cookies.get('user')) window.location = '/login'\r\n        let token = cookies.get('token')\r\n        let myUsername = cookies.get('user').username\r\n        let path = this.props.location.pathname\r\n        let user = path.split('/user/')[1]\r\n        let isMe = user == myUsername\r\n        this.setState({ isMe })\r\n        if (path == '/user' || path == '/user/') window.location = `/user/${myUsername}`\r\n        axios.get(`/api/user/username/${user}?token=${token}`)\r\n            .catch(err => console.error(err))\r\n            .then(response => {\r\n                let userData = response.data.result[0]\r\n                if (!userData) window.location = `/user/${myUsername}`\r\n                this.setState({ user: userData })\r\n                let avatarWrapper = document.getElementById('avatar-wrapper')\r\n                if (this.state.user.avatar !== '') {\r\n                    avatarWrapper.style.backgroundImage = `url('${this.state.user.avatar}')`\r\n                    avatarWrapper.style.backgroundSize = 'cover'\r\n                }\r\n                //get posts by user\r\n                axios.get(`/api/post/user/${this.state.user.username}?token=${token}`)\r\n                    .catch(err => console.error(err))\r\n                    .then(response => {\r\n                        this.setState({ posts: response.data.result })\r\n                    })\r\n            })\r\n    }\r\n\r\n    componentDidMount() {\r\n        let gradients = [\r\n            'linear-gradient(to top, #cfd9df 0%, #e2ebf0 100%)',\r\n            'linear-gradient(to top, #fad0c4 0%, #ffd1ff 100%)',\r\n            'linear-gradient(to right, #ffecd2 0%, #fcb69f 100%)',\r\n            'linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%)',\r\n            'linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%)',\r\n            'linear-gradient(to top, #a8edea 0%, #fed6e3 100%)',\r\n            'linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)'\r\n        ]\r\n        let index = Math.floor((Math.random() * gradients.length - 1) + 0)\r\n        let header = document.querySelector('.header')\r\n        header.style.backgroundImage = gradients[index]\r\n    }\r\n\r\n    render() {\r\n\r\n        const renderFollowBtn = () => {\r\n            if (!this.state.isMe) return (\r\n                <FollowBtn />\r\n            )\r\n        }\r\n\r\n        return (\r\n            <div className=\"User\">\r\n\r\n                <div className=\"header\">\r\n                    <div id=\"header-wrapper\">\r\n                        <div id=\"avatar-wrapper\"></div>\r\n                        <div id=\"header-textblock\">\r\n                            <h1 id=\"fullname\">{this.state.user.name}</h1>\r\n                            <h2 id=\"username\">{this.state.user.username}</h2>\r\n                        </div>\r\n                        {renderFollowBtn()}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"PostsView\">\r\n                    {this.state.posts.map(post => (\r\n                        <Post key={post.id} postID={`post_${post.id}`} user={post.user} body={post.description} imgurLink={post.imgur_link} category={post.category} />\r\n                    ))}\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default User"]},"metadata":{},"sourceType":"module"}